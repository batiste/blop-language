import { DogGame } from './DogBreedGame.blop'
import { getNewDog } from './services.blop'

def DogPage(attributes, _children, node: Component): VNode {
  { state } = attributes
  node.mount(async () => {
    // Using optional chaining to safely check nested property
    if (!state.dogPage?.choice) {
      await getNewDog(state)
    }
  })

  <DogGame page=state.dogPage state=state loading=state.loading>
    = 'Dog breed game'
  </DogGame>
}