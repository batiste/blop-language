import { useState, setContext, getContext } from 'blop'

Counter = (attributes, children) => {
  // copying the React weird hook interface
  { value as counter, setState } = useState(0)
  increase = () => setState(counter + 1)
  decrease = () => setState(counter - 1)
  <div>
    <h4>attributes.name</h4>
    <label>
      <button class="btn btn-success" on={ click: increase }>'increase'</button>
      <button class="btn btn-danger" on={ click: decrease }>'decrease'</button>
      <b style={ 'font-size': '20px' }>' 'counter' '</b>
    </label>
    if children && counter < 3 {
      = children
    }
  </div>
}

ContextConsumer = (attributes, children) => {
  <p>'This is an example of how a context can be passed down the tree 
      while still being segregated hierachically. Subscription to change is not supported.
      The value is 'getContext('value')''</p>
}

CounterPage = (attributes) => {
  <div>
    <h3>'useState'</h3>
    <p>
      = 'An example on how you can have state stored inside a component
      Reloading the page will reset the state'
    </p>
    <Counter name='Counter 1' />
    <Counter name='Counter 2, if > 2 hide counter 3'>
      <Counter name='Counter 3, state is kept even if hidden' />
    </Counter>
    <h3>'setContext, getContext'</h3>
    setContext('value', 100)
    <ContextConsumer />
  </div>
}